{% extends "_public_base.html" %}

{% block content %}
<div class="max-w-xl mx-auto py-10">
  <h1 class="text-2xl font-semibold mb-4">Select a business</h1>

  {% if memberships and memberships|length %}
    <p class="mb-4 text-gray-600">You have access to the following businesses:</p>
    <ul class="space-y-2">
      {% for m in memberships %}
        {# handle both a BusinessMember object or a plain business in the list #}
        {% if m.business %}
          {% with biz=m.business %}
            <li>
              <a href="{% url 'portal_calendar' slug=biz.slug %}" class="text-blue-600 hover:underline">
                {{ biz.name }}
              </a>
            </li>
          {% endwith %}
        {% else %}
          <li>
            <a href="{% url 'portal_calendar' slug=m.slug %}" class="text-blue-600 hover:underline">
              {{ m.name }}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-600">You donâ€™t have access to any business yet.</p>
    <p class="mt-2">Please contact an admin to be added as a member.</p>
  {% endif %}
</div>
{% endblock %}
